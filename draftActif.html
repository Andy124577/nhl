<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Draft Actif</title>
  <link rel="stylesheet" href="draftActif.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
  <nav class="navbar">
    <ul>
      <li><a href="index.html">Stats</a></li>
      <li><a href="equipes.html">√âquipes</a></li>
      <li class="active"><a href="draft.html">Draft</a></li>
      <li id="admin-users-link" style="display: none;"></li>
      <li id="login-link"><a href="login.html">Connexion</a></li>
    </ul>
  </nav>

  <!-- Draft Header with Pick Number -->
  <div class="draft-header">
    <div class="draft-header-content">
      <div class="draft-info">
        <h2 id="draft-title">Draft NHL</h2>
        <div id="draft-clan-name"></div>
      </div>
      <div class="current-pick-display">
        <div class="pick-label">Choix actuel</div>
        <div class="pick-number-large" id="current-pick-number">1</div>
        <div class="pick-team" id="current-pick-team"></div>
      </div>
    </div>
  </div>

  <!-- Draft Status & Progress -->
  <div class="draft-main-container">

    <!-- Left Column: Draft Order & Progress -->
    <div class="draft-sidebar">

      <!-- Your Progress -->
      <div class="progress-card">
        <div class="progress-header">
          <h3>Ma progression</h3>
          <select id="progressFilter" class="progress-filter-select">
            <option value="">Voir d√©tails...</option>
            <option value="offensive">Attaquants</option>
            <option value="defensive">D√©fenseurs</option>
            <option value="rookie">Recrues</option>
            <option value="goalie">Gardien</option>
            <option value="team">√âquipe</option>
          </select>
        </div>
        <div id="progressDetailsList" class="progress-details-list" style="display: none;">
          <!-- Player list will be populated here -->
        </div>
        <div class="progress-list">
          <div class="progress-line">
            <span class="progress-emoji">‚ö°</span>
            <span class="progress-text">Attaquants</span>
            <div class="progress-mini-bar">
              <div class="progress-mini-fill" id="mini-progress-offensive"></div>
            </div>
            <span class="progress-value" id="count-offensive">0/6</span>
          </div>
          <div class="progress-line">
            <span class="progress-emoji">üõ°Ô∏è</span>
            <span class="progress-text">D√©fenseurs</span>
            <div class="progress-mini-bar">
              <div class="progress-mini-fill" id="mini-progress-defensive"></div>
            </div>
            <span class="progress-value" id="count-defensive">0/4</span>
          </div>
          <div class="progress-line">
            <span class="progress-emoji">‚≠ê</span>
            <span class="progress-text">Recrues</span>
            <div class="progress-mini-bar">
              <div class="progress-mini-fill" id="mini-progress-rookie"></div>
            </div>
            <span class="progress-value" id="count-rookie">0/1</span>
          </div>
          <div class="progress-line">
            <span class="progress-emoji">ü•Ö</span>
            <span class="progress-text">Gardien</span>
            <div class="progress-mini-bar">
              <div class="progress-mini-fill" id="mini-progress-goalie"></div>
            </div>
            <span class="progress-value" id="count-goalie">0/1</span>
          </div>
          <div class="progress-line">
            <span class="progress-emoji">üèí</span>
            <span class="progress-text">√âquipe</span>
            <div class="progress-mini-bar">
              <div class="progress-mini-fill" id="mini-progress-team"></div>
            </div>
            <span class="progress-value" id="count-team">0/1</span>
          </div>
        </div>
      </div>

      <!-- Draft Order Timeline -->
      <div class="draft-order-card">
        <h3>Ordre du draft</h3>
        <div id="draft-order-timeline" class="draft-timeline">
          <!-- Timeline items will be injected here -->
        </div>
      </div>

    </div>

    <!-- Center Column: Recent Picks Carousel -->
    <div class="draft-center">

      <div class="recent-picks-card">
        <div class="card-header">
          <h3>Derniers choix</h3>
          <div class="carousel-controls">
            <button class="carousel-btn" id="carousel-prev">‚Äπ</button>
            <button class="carousel-btn" id="carousel-next">‚Ä∫</button>
          </div>
        </div>
        <div class="picks-carousel" id="picks-carousel">
          <!-- Recent picks will be displayed here -->
        </div>
      </div>

      <!-- Player Selection Area -->
      <div class="player-selection-card">
        <div class="filters-header">
          <h3>S√©lection de joueur</h3>
          <select id="availabilityFilter" class="filter-select">
            <option value="available">Disponibles</option>
            <option value="picked">Tous les choix</option>
            <option value="pickedByTeam">Mes choix</option>
          </select>
        </div>

        <div class="filters-row">
          <input type="text" id="searchInput" placeholder="üîç Rechercher..." class="search-input"/>
          <select id="playerFilter" class="filter-select">
            <option value="all">Tous</option>
            <option value="offensive">Attaquants</option>
            <option value="defensive">D√©fenseurs</option>
            <option value="goalies">Gardiens</option>
            <option value="rookies">Recrues</option>
            <option value="teams">√âquipes</option>
          </select>
          <select id="sortBy" class="filter-select">
            <option value="points">Points</option>
            <option value="goals">Buts</option>
            <option value="assists">Passes</option>
          </select>
          <button onclick="loadDraftData()" class="refresh-btn">üîÑ</button>
        </div>

        <div class="table-wrapper">
          <table id="playerTable">
            <thead>
              <tr id="tableHeaderRow">
                <th>Photo</th>
                <th>Joueur</th>
                <th>GP</th>
                <th>G</th>
                <th>A</th>
                <th>PTS</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

    </div>

  </div>

  <div id="loading-container">
    <div id="loading">
      <span class="spinner"></span>
    </div>
  </div>

  <!-- Custom Alert Modal -->
  <div id="customAlertOverlay" class="custom-alert-overlay">
    <div class="custom-alert-box">
      <div class="custom-alert-icon" id="alertIcon"></div>
      <div class="custom-alert-message" id="alertMessage"></div>
      <button class="custom-alert-button" id="alertOkButton">OK</button>
    </div>
  </div>

  <button id="finishButton" class="finish-btn" style="display: none;" onclick="window.location.href='draft.html'">Terminer le draft</button>

  <script src="draftActif.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>
</html>
